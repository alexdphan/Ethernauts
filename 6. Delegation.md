# 6. Delegation.md

## tldr:
- Use the higher level call() function to inherit from libraries, especially when you:
  - i) don’t need to change contract storage
  - ii) do not care about gas control.
- When inheriting from a library intending to alter your contract’s storage, make sure to line up your storage slots with the library’s storage slots to avoid these edge cases
- Authenticate and do conditional checks on functions that invoke delegatecalls.
- Read solidity documentation on security considerations.
- When contract A makes a delegatecall to Contract B, it allows Contract B to freely mutate its storage A.

## Additional Resources
Ethernaut CTF - https://ethernaut.openzeppelin.com/
Web3 Blockchain Developer (Delegation challenge) - https://youtu.be/Kj5UQ42gVqE?list=PLB...
Sigma Prime Delegatecall vulnerabilities - https://blog.sigmaprime.io/solidity-s...
Mastering Ethereum Book (same as above) - https://github.com/ethereumbook/ether...
Smart Contract Developer (2-part series) - https://youtu.be/bqn-HzRclps
Code for above 2-part series - https://solidity-by-example.org/hacks...
Blog for exploiting delegate call - https://www.derekarends.com/solidity-...
Corresponding video for above blog - https://youtu.be/pkVzTsUqV2E
Delegatecall Solidity Docs - https://docs.soliditylang.org/en/v0.8...
Stack Exchange (best definition) - https://ethereum.stackexchange.com/qu...
Proxy Contracts (upgradable contracts) - https://blog.openzeppelin.com/proxy-p...
Flaws in proxy pattern (Trail of bits) - https://blog.trailofbits.com/2018/09/...
State variable ordering explanation - https://blockchain-academy.hs-mittwei...
